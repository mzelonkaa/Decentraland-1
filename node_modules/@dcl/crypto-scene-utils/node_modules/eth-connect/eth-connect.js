/*! eth-connect {
  "date": "2021-01-11T20:41:43.403Z",
  "commit": "7f570aad57ff75b5b1d1491b0cf703c19f16e9c8",
  "ref": "refs/tags/5.0.0"
} */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("eth-connect",["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ethconnect={})}(this,(function(t){"use strict";function e(t){if(t.jsonrpc="2.0",!t.id||"number"!=typeof t.id||Math.floor(t.id)!==t.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(t)}`);if(!t.method||"string"!=typeof t.method||0===t.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(t)}`);if(!t.params||"object"!=typeof t.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(t)}`);return t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r,o=n((function(t,e){function n(){let t,e;const n=new Promise(((r,o)=>{t=t=>{r(t),n.isPending=!1},e=t=>{o(t),n.isPending=!1}})).catch((t=>Promise.reject(t)));return n.resolve=t,n.reject=e,"finally"in n||(n.finally=t=>{n.then(t),n.catch(t)}),n.isPending=!0,n}Object.defineProperty(e,"__esModule",{value:!0}),e.future=n,e.default=n}));(r=o)&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")&&r.default;var i=o.future;var s=n((function(t){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,i=Math.floor,s="[BigNumber Error] ",a=s+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function d(t){var e=0|t;return t>0||t===e?e:e-1}function g(t){for(var e,n,r=1,o=t.length,i=t[0]+"";r<o;){for(e=t[r++]+"",n=c-e.length;n--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function m(t,e){var n,r,o=t.c,i=e.c,s=t.s,a=e.s,u=t.e,c=e.e;if(!s||!a)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=u==c,!o||!i)return r?0:!o^n?1:-1;if(!r)return u>c^n?1:-1;for(a=(u=o.length)<(c=i.length)?u:c,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^n?1:-1;return u==c?0:u>c^n?1:-1}function y(t,e,n,r){if(t<e||t>n||t!==(t<0?o(t):i(t)))throw Error(s+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+t)}function w(t){return"[object Array]"==Object.prototype.toString.call(t)}function _(t){var e=t.c.length-1;return d(t.e/c)==e&&t.c[e]%2!=0}function b(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function v(t,e,n){var r,o;if(e<0){for(o=n+".";++e;o+=n);t=o+t}else if(++e>(r=t.length)){for(o=n,e-=r;--e;o+=n);t+=o}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}(n=function t(e){var n,F,N,k,T,A,O,x,B,E,C=W.prototype={constructor:W,toString:null,valueOf:null},S=new W(1),P=20,I=4,R=-7,M=21,D=-1e7,U=1e7,L=!1,j=1,q=0,H={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"Â ",fractionGroupSize:0},$="0123456789abcdefghijklmnopqrstuvwxyz";function W(t,e){var n,o,s,u,h,f,p,d,g=this;if(!(g instanceof W))return new W(t,e);if(null==e){if(t instanceof W)return g.s=t.s,g.e=t.e,void(g.c=(t=t.c)?t.slice():t);if((f="number"==typeof t)&&0*t==0){if(g.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,h=t;h>=10;h/=10,u++);return g.e=u,void(g.c=[t])}d=t+""}else{if(!r.test(d=t+""))return N(g,d,f);g.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(u=d.indexOf("."))>-1&&(d=d.replace(".","")),(h=d.search(/e/i))>0?(u<0&&(u=h),u+=+d.slice(h+1),d=d.substring(0,h)):u<0&&(u=d.length)}else{if(y(e,2,$.length,"Base"),d=t+"",10==e)return V(g=new W(t instanceof W?t:d),P+g.e+1,I);if(f="number"==typeof t){if(0*t!=0)return N(g,d,f,e);if(g.s=1/t<0?(d=d.slice(1),-1):1,W.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(a+t);f=!1}else g.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=$.slice(0,e),u=h=0,p=d.length;h<p;h++)if(n.indexOf(o=d.charAt(h))<0){if("."==o){if(h>u){u=p;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,h=-1,u=0;continue}return N(g,t+"",f,e)}(u=(d=F(d,e,10,g.s)).indexOf("."))>-1?d=d.replace(".",""):u=d.length}for(h=0;48===d.charCodeAt(h);h++);for(p=d.length;48===d.charCodeAt(--p););if(d=d.slice(h,++p)){if(p-=h,f&&W.DEBUG&&p>15&&(t>l||t!==i(t)))throw Error(a+g.s*t);if((u=u-h-1)>U)g.c=g.e=null;else if(u<D)g.c=[g.e=0];else{if(g.e=u,g.c=[],h=(u+1)%c,u<0&&(h+=c),h<p){for(h&&g.c.push(+d.slice(0,h)),p-=c;h<p;)g.c.push(+d.slice(h,h+=c));d=d.slice(h),h=c-d.length}else h-=p;for(;h--;d+="0");g.c.push(+d)}}else g.c=[g.e=0]}function G(t,e,n,r){var o,i,s,a,u;if(null==n?n=I:y(n,0,8),!t.c)return t.toString();if(o=t.c[0],s=t.e,null==e)u=g(t.c),u=1==r||2==r&&s<=R?b(u,s):v(u,s,"0");else if(i=(t=V(new W(t),e,n)).e,a=(u=g(t.c)).length,1==r||2==r&&(e<=i||i<=R)){for(;a<e;u+="0",a++);u=b(u,i)}else if(e-=s,u=v(u,i,"0"),i+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=i-a)>0)for(i+1==a&&(u+=".");e--;u+="0");return t.s<0&&o?"-"+u:u}function J(t,e){var n,r,o=0;for(w(t[0])&&(t=t[0]),n=new W(t[0]);++o<t.length;){if(!(r=new W(t[o])).s){n=r;break}e.call(n,r)&&(n=r)}return n}function z(t,e,n){for(var r=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,r++);return(n=r+n*c-1)>U?t.c=t.e=null:n<D?t.c=[t.e=0]:(t.e=n,t.c=e),t}function V(t,e,n,r){var s,a,l,f,p,d,g,m=t.c,y=h;if(m){t:{for(s=1,f=m[0];f>=10;f/=10,s++);if((a=e-s)<0)a+=c,l=e,g=(p=m[d=0])/y[s-l-1]%10|0;else if((d=o((a+1)/c))>=m.length){if(!r)break t;for(;m.length<=d;m.push(0));p=g=0,s=1,l=(a%=c)-c+1}else{for(p=f=m[d],s=1;f>=10;f/=10,s++);g=(l=(a%=c)-c+s)<0?0:p/y[s-l-1]%10|0}if(r=r||e<0||null!=m[d+1]||(l<0?p:p%y[s-l-1]),r=n<4?(g||r)&&(0==n||n==(t.s<0?3:2)):g>5||5==g&&(4==n||r||6==n&&(a>0?l>0?p/y[s-l]:0:m[d-1])%10&1||n==(t.s<0?8:7)),e<1||!m[0])return m.length=0,r?(e-=t.e+1,m[0]=y[(c-e%c)%c],t.e=-e||0):m[0]=t.e=0,t;if(0==a?(m.length=d,f=1,d--):(m.length=d+1,f=y[c-a],m[d]=l>0?i(p/y[s-l]%y[l])*f:0),r)for(;;){if(0==d){for(a=1,l=m[0];l>=10;l/=10,a++);for(l=m[0]+=f,f=1;l>=10;l/=10,f++);a!=f&&(t.e++,m[0]==u&&(m[0]=1));break}if(m[d]+=f,m[d]!=u)break;m[d--]=0,f=1}for(a=m.length;0===m[--a];m.pop());}t.e>U?t.c=t.e=null:t.e<D&&(t.c=[t.e=0])}return t}return W.clone=t,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(s+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(y(n=t[e],0,p,e),P=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(y(n=t[e],0,8,e),I=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&(w(n=t[e])?(y(n[0],-p,0,e),y(n[1],0,p,e),R=n[0],M=n[1]):(y(n,-p,p,e),R=-(M=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if(w(n=t[e]))y(n[0],-p,-1,e),y(n[1],1,p,e),D=n[0],U=n[1];else{if(y(n,-p,p,e),!n)throw Error(s+e+" cannot be zero: "+n);D=-(U=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(s+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw L=!n,Error(s+"crypto unavailable");L=n}else L=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(y(n=t[e],0,9,e),j=n),t.hasOwnProperty(e="POW_PRECISION")&&(y(n=t[e],0,p,e),q=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(s+e+" not an object: "+n);H=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.$|\.|(.).*\1/.test(n))throw Error(s+e+" invalid: "+n);$=n}}return{DECIMAL_PLACES:P,ROUNDING_MODE:I,EXPONENTIAL_AT:[R,M],RANGE:[D,U],CRYPTO:L,MODULO_MODE:j,POW_PRECISION:q,FORMAT:H,ALPHABET:$}},W.isBigNumber=function(t){return t instanceof W||t&&!0===t._isBigNumber||!1},W.maximum=W.max=function(){return J(arguments,C.lt)},W.minimum=W.min=function(){return J(arguments,C.gt)},W.random=(k=9007199254740992,T=Math.random()*k&2097151?function(){return i(Math.random()*k)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,a,u,l=0,f=[],d=new W(S);if(null==t?t=P:y(t,0,p),a=o(t/c),L)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(u=131072*e[l]+(e[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[l]=n[0],e[l+1]=n[1]):(f.push(u%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw L=!1,Error(s+"crypto unavailable");for(e=crypto.randomBytes(a*=7);l<a;)(u=281474976710656*(31&e[l])+1099511627776*e[l+1]+4294967296*e[l+2]+16777216*e[l+3]+(e[l+4]<<16)+(e[l+5]<<8)+e[l+6])>=9e15?crypto.randomBytes(7).copy(e,l):(f.push(u%1e14),l+=7);l=a/7}if(!L)for(;l<a;)(u=T())<9e15&&(f[l++]=u%1e14);for(a=f[--l],t%=c,a&&t&&(u=h[c-t],f[l]=i(a/u)*u);0===f[l];f.pop(),l--);if(l<0)f=[r=0];else{for(r=-1;0===f[0];f.splice(0,1),r-=c);for(l=1,u=f[0];u>=10;u/=10,l++);l<c&&(r-=c-l)}return d.e=r,d.c=f,d}),F=function(){var t="0123456789";function e(t,e,n,r){for(var o,i,s=[0],a=0,u=t.length;a<u;){for(i=s.length;i--;s[i]*=e);for(s[0]+=r.indexOf(t.charAt(a++)),o=0;o<s.length;o++)s[o]>n-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/n|0,s[o]%=n)}return s.reverse()}return function(r,o,i,s,a){var u,c,l,h,f,p,d,m,y=r.indexOf("."),w=P,_=I;for(y>=0&&(h=q,q=0,r=r.replace(".",""),p=(m=new W(o)).pow(r.length-y),q=h,m.c=e(v(g(p.c),p.e,"0"),10,i,t),m.e=m.c.length),l=h=(d=e(r,o,i,a?(u=$,t):(u=t,$))).length;0==d[--h];d.pop());if(!d[0])return u.charAt(0);if(y<0?--l:(p.c=d,p.e=l,p.s=s,d=(p=n(p,m,w,_,i)).c,f=p.r,l=p.e),y=d[c=l+w+1],h=i/2,f=f||c<0||null!=d[c+1],f=_<4?(null!=y||f)&&(0==_||_==(p.s<0?3:2)):y>h||y==h&&(4==_||f||6==_&&1&d[c-1]||_==(p.s<0?8:7)),c<1||!d[0])r=f?v(u.charAt(1),-w,u.charAt(0)):u.charAt(0);else{if(d.length=c,f)for(--i;++d[--c]>i;)d[c]=0,c||(++l,d=[1].concat(d));for(h=d.length;!d[--h];);for(y=0,r="";y<=h;r+=u.charAt(d[y++]));r=v(r,l,u.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,o,i,s,a=0,u=t.length,c=e%f,l=e/f|0;for(t=t.slice();u--;)a=((o=c*(i=t[u]%f)+(r=l*i+(s=t[u]/f|0)*c)%f*f+a)/n|0)+(r/f|0)+l*s,t[u]=o%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function n(t,e,n,r){for(var o=0;n--;)t[n]-=o,o=t[n]<e[n]?1:0,t[n]=o*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,o,s,a,l){var h,f,p,g,m,y,w,_,b,v,F,N,k,T,A,O,x,B=r.s==o.s?1:-1,E=r.c,C=o.c;if(!(E&&E[0]&&C&&C[0]))return new W(r.s&&o.s&&(E?!C||E[0]!=C[0]:C)?E&&0==E[0]||!C?0*B:B/0:NaN);for(b=(_=new W(B)).c=[],B=s+(f=r.e-o.e)+1,l||(l=u,f=d(r.e/c)-d(o.e/c),B=B/c|0),p=0;C[p]==(E[p]||0);p++);if(C[p]>(E[p]||0)&&f--,B<0)b.push(1),g=!0;else{for(T=E.length,O=C.length,p=0,B+=2,(m=i(l/(C[0]+1)))>1&&(C=t(C,m,l),E=t(E,m,l),O=C.length,T=E.length),k=O,F=(v=E.slice(0,O)).length;F<O;v[F++]=0);x=C.slice(),x=[0].concat(x),A=C[0],C[1]>=l/2&&A++;do{if(m=0,(h=e(C,v,O,F))<0){if(N=v[0],O!=F&&(N=N*l+(v[1]||0)),(m=i(N/A))>1)for(m>=l&&(m=l-1),w=(y=t(C,m,l)).length,F=v.length;1==e(y,v,w,F);)m--,n(y,O<w?x:C,w,l),w=y.length,h=1;else 0==m&&(h=m=1),w=(y=C.slice()).length;if(w<F&&(y=[0].concat(y)),n(v,y,F,l),F=v.length,-1==h)for(;e(C,v,O,F)<1;)m++,n(v,O<F?x:C,F,l),F=v.length}else 0===h&&(m++,v=[0]);b[p++]=m,v[0]?v[F++]=E[k]||0:(v=[E[k]],F=1)}while((k++<T||null!=v[0])&&B--);g=null!=v[0],b[0]||b.splice(0,1)}if(l==u){for(p=1,B=b[0];B>=10;B/=10,p++);V(_,s+(_.e=p+f*c-1)+1,a,g)}else _.e=f,_.r=+g;return _}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,x=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,E=/^\s*\+(?=[\w.])|^\s+|\s+$/g,N=function(t,e,n,r){var o,i=n?e:e.replace(E,"");if(B.test(i))t.s=isNaN(i)?null:i<0?-1:1,t.c=t.e=null;else{if(!n&&(i=i.replace(A,(function(t,e,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?t:e})),r&&(o=r,i=i.replace(O,"$1").replace(x,"0.$1")),e!=i))return new W(i,o);if(W.DEBUG)throw Error(s+"Not a"+(r?" base "+r:"")+" number: "+e);t.c=t.e=t.s=null}},C.absoluteValue=C.abs=function(){var t=new W(this);return t.s<0&&(t.s=1),t},C.comparedTo=function(t,e){return m(this,new W(t,e))},C.decimalPlaces=C.dp=function(t,e){var n,r,o,i=this;if(null!=t)return y(t,0,p),null==e?e=I:y(e,0,8),V(new W(i),t+i.e+1,e);if(!(n=i.c))return null;if(r=((o=n.length-1)-d(this.e/c))*c,o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},C.dividedBy=C.div=function(t,e){return n(this,new W(t,e),P,I)},C.dividedToIntegerBy=C.idiv=function(t,e){return n(this,new W(t,e),0,1)},C.exponentiatedBy=C.pow=function(t,e){var n,r,a,u,l,h,f,p=this;if((t=new W(t)).c&&!t.isInteger())throw Error(s+"Exponent not an integer: "+t);if(null!=e&&(e=new W(e)),u=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new W(Math.pow(+p.valueOf(),u?2-_(t):+t)),e?f.mod(e):f;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new W(NaN);(r=!l&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return a=p.s<0&&_(t)?-0:0,p.e>-1&&(a=1/a),new W(l?1/a:a);q&&(a=o(q/c+2))}for(u?(n=new W(.5),h=_(t)):h=t%2,l&&(t.s=1),f=new W(S);;){if(h){if(!(f=f.times(p)).c)break;a?f.c.length>a&&(f.c.length=a):r&&(f=f.mod(e))}if(u){if(V(t=t.times(n),t.e+1,1),!t.c[0])break;u=t.e>14,h=_(t)}else{if(!(t=i(t/2)))break;h=t%2}p=p.times(p),a?p.c&&p.c.length>a&&(p.c.length=a):r&&(p=p.mod(e))}return r?f:(l&&(f=S.div(f)),e?f.mod(e):a?V(f,q,I,undefined):f)},C.integerValue=function(t){var e=new W(this);return null==t?t=I:y(t,0,8),V(e,e.e+1,t)},C.isEqualTo=C.eq=function(t,e){return 0===m(this,new W(t,e))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(t,e){return m(this,new W(t,e))>0},C.isGreaterThanOrEqualTo=C.gte=function(t,e){return 1===(e=m(this,new W(t,e)))||0===e},C.isInteger=function(){return!!this.c&&d(this.e/c)>this.c.length-2},C.isLessThan=C.lt=function(t,e){return m(this,new W(t,e))<0},C.isLessThanOrEqualTo=C.lte=function(t,e){return-1===(e=m(this,new W(t,e)))||0===e},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(t,e){var n,r,o,i,s=this,a=s.s;if(e=(t=new W(t,e)).s,!a||!e)return new W(NaN);if(a!=e)return t.s=-e,s.plus(t);var l=s.e/c,h=t.e/c,f=s.c,p=t.c;if(!l||!h){if(!f||!p)return f?(t.s=-e,t):new W(p?s:NaN);if(!f[0]||!p[0])return p[0]?(t.s=-e,t):new W(f[0]?s:3==I?-0:0)}if(l=d(l),h=d(h),f=f.slice(),a=l-h){for((i=a<0)?(a=-a,o=f):(h=l,o=p),o.reverse(),e=a;e--;o.push(0));o.reverse()}else for(r=(i=(a=f.length)<(e=p.length))?a:e,a=e=0;e<r;e++)if(f[e]!=p[e]){i=f[e]<p[e];break}if(i&&(o=f,f=p,p=o,t.s=-t.s),(e=(r=p.length)-(n=f.length))>0)for(;e--;f[n++]=0);for(e=u-1;r>a;){if(f[--r]<p[r]){for(n=r;n&&!f[--n];f[n]=e);--f[n],f[r]+=u}f[r]-=p[r]}for(;0==f[0];f.splice(0,1),--h);return f[0]?z(t,f,h):(t.s=3==I?-1:1,t.c=[t.e=0],t)},C.modulo=C.mod=function(t,e){var r,o,i=this;return t=new W(t,e),!i.c||!t.s||t.c&&!t.c[0]?new W(NaN):!t.c||i.c&&!i.c[0]?new W(i):(9==j?(o=t.s,t.s=1,r=n(i,t,0,3),t.s=o,r.s*=o):r=n(i,t,0,j),(t=i.minus(r.times(t))).c[0]||1!=j||(t.s=i.s),t)},C.multipliedBy=C.times=function(t,e){var n,r,o,i,s,a,l,h,p,g,m,y,w,_,b,v=this,F=v.c,N=(t=new W(t,e)).c;if(!(F&&N&&F[0]&&N[0]))return!v.s||!t.s||F&&!F[0]&&!N||N&&!N[0]&&!F?t.c=t.e=t.s=null:(t.s*=v.s,F&&N?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=d(v.e/c)+d(t.e/c),t.s*=v.s,(l=F.length)<(g=N.length)&&(w=F,F=N,N=w,o=l,l=g,g=o),o=l+g,w=[];o--;w.push(0));for(_=u,b=f,o=g;--o>=0;){for(n=0,m=N[o]%b,y=N[o]/b|0,i=o+(s=l);i>o;)n=((h=m*(h=F[--s]%b)+(a=y*h+(p=F[s]/b|0)*m)%b*b+w[i]+n)/_|0)+(a/b|0)+y*p,w[i--]=h%_;w[i]=n}return n?++r:w.splice(0,1),z(t,w,r)},C.negated=function(){var t=new W(this);return t.s=-t.s||null,t},C.plus=function(t,e){var n,r=this,o=r.s;if(e=(t=new W(t,e)).s,!o||!e)return new W(NaN);if(o!=e)return t.s=-e,r.minus(t);var i=r.e/c,s=t.e/c,a=r.c,l=t.c;if(!i||!s){if(!a||!l)return new W(o/0);if(!a[0]||!l[0])return l[0]?t:new W(a[0]?r:0*o)}if(i=d(i),s=d(s),a=a.slice(),o=i-s){for(o>0?(s=i,n=l):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(e=l.length)<0&&(n=l,l=a,a=n,e=o),o=0;e;)o=(a[--e]=a[e]+l[e]+o)/u|0,a[e]=u===a[e]?0:a[e]%u;return o&&(a=[o].concat(a),++s),z(t,a,s)},C.precision=C.sd=function(t,e){var n,r,o,i=this;if(null!=t&&t!==!!t)return y(t,1,p),null==e?e=I:y(e,0,8),V(new W(i),t,e);if(!(n=i.c))return null;if(r=(o=n.length-1)*c+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return t&&i.e+1>r&&(r=i.e+1),r},C.shiftedBy=function(t){return y(t,-9007199254740991,l),this.times("1e"+t)},C.squareRoot=C.sqrt=function(){var t,e,r,o,i,s=this,a=s.c,u=s.s,c=s.e,l=P+4,h=new W("0.5");if(1!==u||!a||!a[0])return new W(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+s))||u==1/0?(((e=g(a)).length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=d((c+1)/2)-(c<0||c%2),r=new W(e=u==1/0?"1e"+c:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new W(u+""),r.c[0])for((u=(c=r.e)+l)<3&&(u=0);;)if(i=r,r=h.times(i.plus(n(s,i,l,1))),g(i.c).slice(0,u)===(e=g(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(V(r,r.e+P+2,1),t=!r.times(r).eq(s));break}if(!o&&(V(i,i.e+P+2,0),i.times(i).eq(s))){r=i;break}l+=4,u+=4,o=1}return V(r,r.e+P+1,I,t)},C.toExponential=function(t,e){return null!=t&&(y(t,0,p),t++),G(this,t,e,1)},C.toFixed=function(t,e){return null!=t&&(y(t,0,p),t=t+this.e+1),G(this,t,e)},C.toFormat=function(t,e){var n=this.toFixed(t,e);if(this.c){var r,o=n.split("."),i=+H.groupSize,s=+H.secondaryGroupSize,a=H.groupSeparator,u=o[0],c=o[1],l=this.s<0,h=l?u.slice(1):u,f=h.length;if(s&&(r=i,i=s,s=r,f-=r),i>0&&f>0){for(r=f%i||i,u=h.substr(0,r);r<f;r+=i)u+=a+h.substr(r,i);s>0&&(u+=a+h.slice(r)),l&&(u="-"+u)}n=c?u+H.decimalSeparator+((s=+H.fractionGroupSize)?c.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+H.fractionGroupSeparator):c):u}return n},C.toFraction=function(t){var e,r,o,i,a,u,l,f,p,d,m,y,w=this,_=w.c;if(null!=t&&(!(f=new W(t)).isInteger()&&(f.c||1!==f.s)||f.lt(S)))throw Error(s+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+t);if(!_)return w.toString();for(r=new W(S),d=o=new W(S),i=p=new W(S),y=g(_),u=r.e=y.length-w.e-1,r.c[0]=h[(l=u%c)<0?c+l:l],t=!t||f.comparedTo(r)>0?u>0?r:d:f,l=U,U=1/0,f=new W(y),p.c[0]=0;m=n(f,r,0,1),1!=(a=o.plus(m.times(i))).comparedTo(t);)o=i,i=a,d=p.plus(m.times(a=d)),p=a,r=f.minus(m.times(a=r)),f=a;return a=n(t.minus(o),i,0,1),p=p.plus(a.times(d)),o=o.plus(a.times(i)),p.s=d.s=w.s,e=n(d,i,u*=2,I).minus(w).abs().comparedTo(n(p,o,u,I).minus(w).abs())<1?[d.toString(),i.toString()]:[p.toString(),o.toString()],U=l,e},C.toNumber=function(){return+this},C.toPrecision=function(t,e){return null!=t&&y(t,1,p),G(this,t,e,2)},C.toString=function(t){var e,n=this,r=n.s,o=n.e;return null===o?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(e=g(n.c),null==t?e=o<=R||o>=M?b(e,o):v(e,o,"0"):(y(t,2,$.length,"Base"),e=F(v(e,o,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},C.valueOf=C.toJSON=function(){var t,e=this,n=e.e;return null===n?e.toString():(t=g(e.c),t=n<=R||n>=M?b(t,n):v(t,n,"0"),e.s<0?"-"+t:t)},C._isBigNumber=!0,null!=e&&W.set(e),W}()).default=n.BigNumber=n,t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)})),a=n((function(t,e){!function(t){var e,n,r,o=String.fromCharCode;function i(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function s(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function a(t,e){return o(t>>e&63|128)}function u(t){if(0==(4294967168&t))return o(t);var e="";return 0==(4294965248&t)?e=o(t>>6&31|192):0==(4294901760&t)?(s(t),e=o(t>>12&15|224),e+=a(t,6)):0==(4292870144&t)&&(e=o(t>>18&7|240),e+=a(t,12),e+=a(t,6)),e+=o(63&t|128)}function c(){if(r>=n)throw Error("Invalid byte index");var t=255&e[r];if(r++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(){var t,o;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(t=255&e[r],r++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|c())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|c()<<6|c())>=2048)return s(o),o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|c()<<12|c()<<6|c())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}t.version="3.0.0",t.encode=function(t){for(var e=i(t),n=e.length,r=-1,o="";++r<n;)o+=u(e[r]);return o},t.decode=function(t){e=i(t),n=e.length,r=0;for(var s,a=[];!1!==(s=l());)a.push(s);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=o((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=o(e);return i}(a)}}(e)})),u=a.encode,c=a.decode,l="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function h(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}var p=h,d=f;function g(t){if(p===setTimeout)return setTimeout(t,0);if((p===h||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}"function"==typeof l.setTimeout&&(p=setTimeout),"function"==typeof l.clearTimeout&&(d=clearTimeout);var m,y=[],w=!1,_=-1;function b(){w&&m&&(w=!1,m.length?y=m.concat(y):_=-1,y.length&&v())}function v(){if(!w){var t=g(b);w=!0;for(var e=y.length;e;){for(m=y,y=[];++_<e;)m&&m[_].run();_=-1,e=y.length}m=null,w=!1,function(t){if(d===clearTimeout)return clearTimeout(t);if((d===f||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}(t)}}function F(t,e){this.fun=t,this.array=e}F.prototype.run=function(){this.fun.apply(null,this.array)};function N(){}var k=N,T=N,A=N,O=N,x=N,B=N,E=N;var C=l.performance||{},S=C.now||C.mozNow||C.msNow||C.oNow||C.webkitNow||function(){return(new Date).getTime()};var P=new Date;var I={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.push(new F(t,e)),1!==y.length||w||g(v)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:k,addListener:T,once:A,off:O,removeListener:x,removeAllListeners:B,emit:E,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*S.call(C),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-P)/1e3}},R=n((function(t){
/**
   * [js-sha3]{@link https://github.com/emn178/js-sha3}
   *
   * @version 0.8.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2015-2018
   * @license MIT
   */
!function(){var e="input is invalid type",n="object"==typeof window,r=n?window:{};r.JS_SHA3_NO_WINDOW&&(n=!1);var o=!n&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof I&&I.versions&&I.versions.node?r=l:o&&(r=self);var i=!r.JS_SHA3_NO_COMMON_JS&&t.exports,s=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),u=[4,1024,262144,67108864],c=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],f=[224,256,384,512],p=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],g={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!s||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var m=function(t,e,n){return function(r){return new C(t,e,t).update(r)[n]()}},y=function(t,e,n){return function(r,o){return new C(t,e,o).update(r)[n]()}},w=function(t,e,n){return function(e,r,o,i){return N["cshake"+t].update(e,r,o,i)[n]()}},_=function(t,e,n){return function(e,r,o,i){return N["kmac"+t].update(e,r,o,i)[n]()}},b=function(t,e,n,r){for(var o=0;o<d.length;++o){var i=d[o];t[i]=e(n,r,i)}return t},v=function(t,e){var n=m(t,e,"hex");return n.create=function(){return new C(t,e,t)},n.update=function(t){return n.create().update(t)},b(n,m,t,e)},F=[{name:"keccak",padding:[1,256,65536,16777216],bits:f,createMethod:v},{name:"sha3",padding:[6,1536,393216,100663296],bits:f,createMethod:v},{name:"shake",padding:[31,7936,2031616,520093696],bits:p,createMethod:function(t,e){var n=y(t,e,"hex");return n.create=function(n){return new C(t,e,n)},n.update=function(t,e){return n.create(e).update(t)},b(n,y,t,e)}},{name:"cshake",padding:u,bits:p,createMethod:function(t,e){var n=g[t],r=w(t,0,"hex");return r.create=function(r,o,i){return o||i?new C(t,e,r).bytepad([o,i],n):N["shake"+t].create(r)},r.update=function(t,e,n,o){return r.create(e,n,o).update(t)},b(r,w,t,e)}},{name:"kmac",padding:u,bits:p,createMethod:function(t,e){var n=g[t],r=_(t,0,"hex");return r.create=function(r,o,i){return new S(t,e,o).bytepad(["KMAC",i],n).bytepad([r],n)},r.update=function(t,e,n,o){return r.create(t,n,o).update(e)},b(r,_,t,e)}}],N={},k=[],T=0;T<F.length;++T)for(var A=F[T],O=A.bits,x=0;x<O.length;++x){var B=A.name+"_"+O[x];if(k.push(B),N[B]=A.createMethod(O[x],A.padding),"sha3"!==A.name){var E=A.name+O[x];k.push(E),N[E]=N[B]}}function C(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}function S(t,e,n){C.call(this,t,e,n)}C.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var n,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);n=!0}for(var o,i,a=this.blocks,u=this.byteCount,l=t.length,h=this.blockCount,f=0,p=this.s;f<l;){if(this.reset)for(this.reset=!1,a[0]=this.block,o=1;o<h+1;++o)a[o]=0;if(n)for(o=this.start;f<l&&o<u;++f)a[o>>2]|=t[f]<<c[3&o++];else for(o=this.start;f<l&&o<u;++f)(i=t.charCodeAt(f))<128?a[o>>2]|=i<<c[3&o++]:i<2048?(a[o>>2]|=(192|i>>6)<<c[3&o++],a[o>>2]|=(128|63&i)<<c[3&o++]):i<55296||i>=57344?(a[o>>2]|=(224|i>>12)<<c[3&o++],a[o>>2]|=(128|i>>6&63)<<c[3&o++],a[o>>2]|=(128|63&i)<<c[3&o++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++f)),a[o>>2]|=(240|i>>18)<<c[3&o++],a[o>>2]|=(128|i>>12&63)<<c[3&o++],a[o>>2]|=(128|i>>6&63)<<c[3&o++],a[o>>2]|=(128|63&i)<<c[3&o++]);if(this.lastByteIndex=o,o>=u){for(this.start=o-u,this.block=a[h],o=0;o<h;++o)p[o]^=a[o];P(p),this.reset=!0}else this.start=o}return this},C.prototype.encode=function(t,e){var n=255&t,r=1,o=[n];for(n=255&(t>>=8);n>0;)o.unshift(n),n=255&(t>>=8),++r;return e?o.push(r):o.unshift(r),this.update(o),o.length},C.prototype.encodeString=function(t){var n,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);n=!0}var o=0,i=t.length;if(n)o=i;else for(var a=0;a<t.length;++a){var u=t.charCodeAt(a);u<128?o+=1:u<2048?o+=2:u<55296||u>=57344?o+=3:(u=65536+((1023&u)<<10|1023&t.charCodeAt(++a)),o+=4)}return o+=this.encode(8*o),this.update(t),o},C.prototype.bytepad=function(t,e){for(var n=this.encode(e),r=0;r<t.length;++r)n+=this.encodeString(t[r]);var o=e-n%e,i=[];return i.length=o,this.update(i),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,n=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[n],e=1;e<n+1;++e)t[e]=0;for(t[n-1]|=2147483648,e=0;e<n;++e)r[e]^=t[e];P(r)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,n=this.s,r=this.outputBlocks,o=this.extraBytes,i=0,s=0,u="";s<r;){for(i=0;i<e&&s<r;++i,++s)t=n[i],u+=a[t>>4&15]+a[15&t]+a[t>>12&15]+a[t>>8&15]+a[t>>20&15]+a[t>>16&15]+a[t>>28&15]+a[t>>24&15];s%e==0&&(P(n),i=0)}return o&&(t=n[i],u+=a[t>>4&15]+a[15&t],o>1&&(u+=a[t>>12&15]+a[t>>8&15]),o>2&&(u+=a[t>>20&15]+a[t>>16&15])),u},C.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,n=this.s,r=this.outputBlocks,o=this.extraBytes,i=0,s=0,a=this.outputBits>>3;t=o?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(t);s<r;){for(i=0;i<e&&s<r;++i,++s)u[s]=n[i];s%e==0&&P(n)}return o&&(u[i]=n[i],t=t.slice(0,a)),t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,r=this.s,o=this.outputBlocks,i=this.extraBytes,s=0,a=0,u=[];a<o;){for(s=0;s<n&&a<o;++s,++a)t=a<<2,e=r[s],u[t]=255&e,u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;a%n==0&&P(r)}return i&&(t=a<<2,e=r[s],u[t]=255&e,i>1&&(u[t+1]=e>>8&255),i>2&&(u[t+2]=e>>16&255)),u},S.prototype=new C,S.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var P=function(t){var e,n,r,o,i,s,a,u,c,l,f,p,d,g,m,y,w,_,b,v,F,N,k,T,A,O,x,B,E,C,S,P,I,R,M,D,U,L,j,q,H,$,W,G,J,z,V,K,Y,Z,X,Q,tt,et,nt,rt,ot,it,st,at,ut,ct,lt;for(r=0;r<48;r+=2)o=t[0]^t[10]^t[20]^t[30]^t[40],i=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],u=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],l=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],e=(p=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|a>>>31),n=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|s>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=o^(u<<1|c>>>31),n=i^(c<<1|u>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=s^(l<<1|f>>>31),n=a^(f<<1|l>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=u^(p<<1|d>>>31),n=c^(d<<1|p>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=l^(o<<1|i>>>31),n=f^(i<<1|o>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,g=t[0],m=t[1],z=t[11]<<4|t[10]>>>28,V=t[10]<<4|t[11]>>>28,B=t[20]<<3|t[21]>>>29,E=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,$=t[40]<<18|t[41]>>>14,W=t[41]<<18|t[40]>>>14,R=t[2]<<1|t[3]>>>31,M=t[3]<<1|t[2]>>>31,y=t[13]<<12|t[12]>>>20,w=t[12]<<12|t[13]>>>20,K=t[22]<<10|t[23]>>>22,Y=t[23]<<10|t[22]>>>22,C=t[33]<<13|t[32]>>>19,S=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,lt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,D=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,_=t[25]<<11|t[24]>>>21,b=t[24]<<11|t[25]>>>21,Z=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,P=t[45]<<29|t[44]>>>3,I=t[44]<<29|t[45]>>>3,T=t[6]<<28|t[7]>>>4,A=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,ot=t[16]<<23|t[17]>>>9,L=t[26]<<25|t[27]>>>7,j=t[27]<<25|t[26]>>>7,v=t[36]<<21|t[37]>>>11,F=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,G=t[8]<<27|t[9]>>>5,J=t[9]<<27|t[8]>>>5,O=t[18]<<20|t[19]>>>12,x=t[19]<<20|t[18]>>>12,it=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,q=t[38]<<8|t[39]>>>24,H=t[39]<<8|t[38]>>>24,N=t[48]<<14|t[49]>>>18,k=t[49]<<14|t[48]>>>18,t[0]=g^~y&_,t[1]=m^~w&b,t[10]=T^~O&B,t[11]=A^~x&E,t[20]=R^~D&L,t[21]=M^~U&j,t[30]=G^~z&K,t[31]=J^~V&Y,t[40]=et^~rt&it,t[41]=nt^~ot&st,t[2]=y^~_&v,t[3]=w^~b&F,t[12]=O^~B&C,t[13]=x^~E&S,t[22]=D^~L&q,t[23]=U^~j&H,t[32]=z^~K&Z,t[33]=V^~Y&X,t[42]=rt^~it&at,t[43]=ot^~st&ut,t[4]=_^~v&N,t[5]=b^~F&k,t[14]=B^~C&P,t[15]=E^~S&I,t[24]=L^~q&$,t[25]=j^~H&W,t[34]=K^~Z&Q,t[35]=Y^~X&tt,t[44]=it^~at&ct,t[45]=st^~ut&lt,t[6]=v^~N&g,t[7]=F^~k&m,t[16]=C^~P&T,t[17]=S^~I&A,t[26]=q^~$&R,t[27]=H^~W&M,t[36]=Z^~Q&G,t[37]=X^~tt&J,t[46]=at^~ct&et,t[47]=ut^~lt&nt,t[8]=N^~g&y,t[9]=k^~m&w,t[18]=P^~T&O,t[19]=I^~A&x,t[28]=$^~R&D,t[29]=W^~M&U,t[38]=Q^~G&z,t[39]=tt^~J&V,t[48]=ct^~et&rt,t[49]=lt^~nt&ot,t[0]^=h[r],t[1]^=h[r+1]};if(i)t.exports=N;else for(T=0;T<k.length;++T)r[k[T]]=N[k[T]]}()})),M=(R.keccak_224,R.keccak224,R.keccak_256,R.keccak256);R.keccak_384,R.keccak384,R.keccak_512,R.keccak512,R.sha3_224,R.sha3_256,R.sha3_384,R.sha3_512,R.shake_128,R.shake128,R.shake_256,R.shake256,R.cshake_128,R.cshake128,R.cshake_256,R.cshake256,R.kmac_128,R.kmac128,R.kmac_256,R.kmac256;function D(t){if("string"!=typeof t)throw new Error("hexToBytes only accept strings, got: "+typeof t);if("0x"===t.substr(0,2))return D(t.substr(2));const e=new Uint8Array(Math.ceil(t.length/2));let n=0;for(let r=0;r<t.length;r+=2){const o=parseInt(t.substr(r,2),16);if(isNaN(o))throw new Error("Cannot read hex string:"+JSON.stringify(t));e[n]=parseInt(t.substr(r,2),16),n++}return e}function U(t,e){if("string"==typeof t){if(e&&"hex"===e.encoding&&"string"==typeof t){let e=t;e.length>2&&"0x"===e.substr(0,2)&&(e=e.substr(2));const n=D(e);return M(n)}return M(u(t))}return M(t)}let L={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function j(t,e,n){return new Array(e-t.length+1).join(n||"0")+t}function q(t,e,n){return t+new Array(e-t.length+1).join(n||"0")}function H(t){let e="",n=0,r=t.length;for("0x"===t.substring(0,2)&&(n=2);n<r;n+=2){let r=parseInt(t.substr(n,2),16);if(0===r)break;e+=String.fromCharCode(r)}return c(e)}function $(t,e=!1){let n=u(t),r="";for(let t=0;t<n.length;t++){let o=n.charCodeAt(t);if(0===o){if(!e)break;r+="00"}else{let t=o.toString(16);r+=t.length<2?"0"+t:t}}return"0x"+r}function W(t){if(-1!==t.name.indexOf("("))return t.name;let e=t.inputs.map((function(t){return t.type})).join();return t.name+"("+e+")"}function G(t){let e=t.indexOf("("),n=t.indexOf(")");return-1!==e&&-1!==n?t.substr(0,e):t}function J(t){let e=t.indexOf("("),n=t.indexOf(")");return-1!==e&&-1!==n?t.substr(e+1,n-e-1).replace(" ",""):""}function z(t){return null==t?t:et(t).toNumber()}function V(t){return et(t).toNumber()}function K(t){return ut(t)?t.toString(10):""+t}function Y(t){return"string"==typeof t&&!t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(t)?"0x"+t:Q(t)}function Z(t){return"boolean"==typeof t?t:0!==et(t).toNumber()}function X(t){let e=et(t),n=e.toString(16);return e.isLessThan(0)?"-0x"+n.substr(1):"0x"+n}function Q(t){if(ht(t))return X(+t);if(ut(t))return X(t);if("object"==typeof t)return $(JSON.stringify(t));if(ct(t)){const e=t;if(0===e.indexOf("-0x"))return X(e);if(0===e.indexOf("0x"))return e;if(!isFinite(e))return $(e,!0)}return X(t)}function tt(t){let e=t?t.toLowerCase():"ether",n=L[e];if(void 0===n)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(L,null,2));return new s(n,10)}function et(t){let e=t||0;return ut(e)?e:"string"!=typeof e||0!==e.indexOf("0x")&&0!==e.indexOf("-0x")?new s(e.toString(10),10):new s(e.replace("0x",""),16)}function nt(t){let e=et(t).integerValue();return e.isLessThan(0)?new s("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16).plus(e).plus(1):e}function rt(t){return/^0x[0-9a-f]{40}$/i.test(t)}function ot(t){return!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(t)&&!/^(0x)?[0-9A-F]{40}$/.test(t))||it(t))}function it(t){const e=t.replace("0x","");let n=U(e.toLowerCase());for(let t=0;t<40;t++)if(parseInt(n[t],16)>7&&e[t].toUpperCase()!==e[t]||parseInt(n[t],16)<=7&&e[t].toLowerCase()!==e[t])return!1;return!0}function st(t){if(!Array.isArray(t))throw new Error(`Value was not an array: ${JSON.stringify(t)}`);return t}function at(t){return rt(t)?t:/^[0-9a-f]{40}$/.test(t)?"0x"+t:"0x"+j(Q(t).substr(2),40)}function ut(t){return t instanceof s}function ct(t){return"string"==typeof t||t&&t.constructor&&"String"===t.constructor.name}function lt(t){return null!==t&&!Array.isArray(t)&&"object"==typeof t}function ht(t){return"boolean"==typeof t}function ft(t){return Array.isArray(t)}var pt,dt,gt;function mt(e,n){if(!e)throw new Error("jsonrpc method should be specified!");if("string"!=typeof e)throw new Error(`jsonrpc must be a string, got ${typeof e}!`);return t.messageId++,{jsonrpc:"2.0",id:t.messageId,method:e,params:n||[]}}function yt(t){return Array.isArray(t)?t.every(e):e(t);function e(t){return!(!t||t.error||"2.0"!==t.jsonrpc||"number"!=typeof t.id||null==t.result&&void 0===t.result)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function wt(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function _t(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}(pt=t.TransactionStatus||(t.TransactionStatus={})).pending="pending",pt.confirmed="confirmed",pt.failed="failed",(dt=t.TransactionType||(t.TransactionType={})).queued="queued",dt.dropped="dropped",dt.replaced="replaced",dt.pending="pending",dt.reverted="reverted",dt.confirmed="confirmed",t.messageId=0,function(t){t[t.ROUND_UP=0]="ROUND_UP",t[t.ROUND_DOWN=1]="ROUND_DOWN",t[t.ROUND_CE=2]="ROUND_CE",t[t.ROUND_FLOOR=3]="ROUND_FLOOR",t[t.ROUND_HALF_UP=4]="ROUND_HALF_UP",t[t.ROUND_HALF_DOWN=5]="ROUND_HALF_DOWN",t[t.ROUND_HALF_EVEN=6]="ROUND_HALF_EVEN",t[t.ROUND_HALF_CEIL=7]="ROUND_HALF_CEIL",t[t.ROUND_HALF_FLOOR=8]="ROUND_HALF_FLOOR"}(gt||(gt={}));const bt={ROUNDING_MODE:gt.ROUND_DOWN};function vt(t){return et(t)}function Ft(t){return void 0===t?"latest":Nt(t)}function Nt(t){if(void 0!==t&&null!=t)return function(t){return"latest"===t||"pending"===t||"earliest"===t}(t)?t:Q(t)}function kt(t){return t.from=t.from,t.from&&(t.from=Et(t.from)),t.to&&(t.to=Et(t.to)),["gasPrice","gas","value","nonce"].filter((function(e){return void 0!==t[e]})).forEach((function(e){t[e]=X(t[e])})),t.data&&!t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(t.data)&&(t.data="0x"+t.data),t}function Tt(t){if("object"!=typeof t)throw new Error("Did not provide transaction options");if(!t.from)throw new Error('Missing "from" in transaction options');return t.from=Et(t.from),t.to&&(t.to=Et(t.to)),["gasPrice","gas","value","nonce"].filter((function(e){return void 0!==t[e]})).forEach((function(e){t[e]=X(t[e])})),t.data&&!t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(t.data)&&(t.data="0x"+t.data),t}function At(t){return t?(null!==t.blockNumber&&(t.blockNumber=V(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=V(t.transactionIndex)),t.nonce=V(t.nonce),t.gas=V(t.gas),t.gasPrice=et(t.gasPrice),t.value=et(t.value),t):null}function Ot(t){return t?(null!==t.blockNumber&&(t.blockNumber=V(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=V(t.transactionIndex)),t.cumulativeGasUsed=V(t.cumulativeGasUsed),t.gasUsed=V(t.gasUsed),ft(t.logs)&&(t.logs=t.logs.map((function(t){return Bt(t)}))),t.status=V(t.status),t):null}function xt(t){return t?(t.gasLimit=V(t.gasLimit),t.gasUsed=V(t.gasUsed),t.size=V(t.size),t.timestamp=V(t.timestamp),null!==t.number&&(t.number=V(t.number)),t.difficulty=et(t.difficulty),t.totalDifficulty=et(t.totalDifficulty),ft(t.transactions)&&t.transactions.forEach((function(t){if(!ct(t))return At(t)})),t):null}function Bt(t){return t?(t.blockNumber&&(t.blockNumber=V(t.blockNumber)),t.transactionIndex&&(t.transactionIndex=V(t.transactionIndex)),t.logIndex&&(t.logIndex=V(t.logIndex)),t):null}function Et(t){if(rt(t))return t;if(ot(t))return"0x"+t;throw new Error(`Invalid address: ${JSON.stringify(t)}`)}function Ct(t){return t?(t.startingBlock=V(t.startingBlock),t.currentBlock=V(t.currentBlock),t.highestBlock=V(t.highestBlock),t.knownStates&&(t.knownStates=V(t.knownStates),t.pulledStates=V(t.pulledStates)),t):t}class St{constructor(t){this.callName=t.callName,this.params=t.params||0,this.inputFormatter=t.inputFormatter||null,this.outputFormatter=t.outputFormatter,this.requestManager=null}validateArgs(t){if(t.length!==this.params)throw e=this.callName,n=t.length,r=this.params,new Error(`Invalid number of input parameters to RPC method "${e}" given: ${n}, expected: ${r}`);var e,n,r}formatInput(t){return this.inputFormatter?this.inputFormatter.map((function(e,n){return e?e(t[n]):t[n]})):t}formatOutput(t){return null!==t?this.outputFormatter(t):null}toPayload(t){let e=this.formatInput(t);return this.validateArgs(e),{method:this.callName,params:e}}async execute(t,...e){let n=this.toPayload(e);if(!t)throw new Error("Missing RequestManager in method#exec");const r=await t.sendAsync(n);return this.formatOutput(r)}}class Pt{constructor(t){this.getter=t.getter,this.outputFormatter=t.outputFormatter}formatOutput(t){return this.outputFormatter(t)}async execute(t){const e=await t.sendAsync({method:this.getter,params:[]});return this.formatOutput(e)}}var It;function Rt(t){return new Promise((e=>setTimeout(e,t)))}(It=t.eth||(t.eth={})).eth_getBalance=new St({callName:"eth_getBalance",params:2,inputFormatter:[Et,Ft],outputFormatter:vt}),It.eth_getStorageAt=new St({callName:"eth_getStorageAt",params:3,inputFormatter:[Et,Q,Ft],outputFormatter:Y}),It.eth_getCode=new St({callName:"eth_getCode",params:2,inputFormatter:[Et,Ft],outputFormatter:Y}),It.eth_getBlockByHash=new St({callName:"eth_getBlockByHash",params:2,inputFormatter:[Nt,function(t){return!!t}],outputFormatter:xt}),It.eth_getBlockByNumber=new St({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Nt,function(t){return!!t}],outputFormatter:xt}),It.eth_getUncleByBlockHashAndIndex=new St({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Nt,Q],outputFormatter:xt}),It.eth_getUncleByBlockNumberAndIndex=new St({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Nt,Q],outputFormatter:xt}),It.eth_getBlockTransactionCountByHash=new St({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Nt],outputFormatter:V}),It.eth_getBlockTransactionCountByNumber=new St({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Nt],outputFormatter:V}),It.eth_getUncleCountByBlockHash=new St({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Nt],outputFormatter:V}),It.eth_getUncleCountByBlockNumber=new St({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Nt],outputFormatter:V}),It.eth_getTransactionByHash=new St({callName:"eth_getTransactionByHash",params:1,outputFormatter:At}),It.eth_getTransactionByBlockHashAndIndex=new St({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Nt,Q],outputFormatter:At}),It.eth_getTransactionByBlockNumberAndIndex=new St({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Nt,Q],outputFormatter:At}),It.eth_getTransactionReceipt=new St({callName:"eth_getTransactionReceipt",params:1,outputFormatter:Ot}),It.eth_getTransactionCount=new St({callName:"eth_getTransactionCount",params:2,inputFormatter:[Et,Ft],outputFormatter:V}),It.eth_sendRawTransaction=new St({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:Y}),It.web3_sha3=new St({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:Y}),It.eth_sendTransaction=new St({callName:"eth_sendTransaction",params:1,inputFormatter:[Tt],outputFormatter:Y}),It.eth_sign=new St({callName:"eth_sign",params:2,inputFormatter:[Et,null],outputFormatter:Y}),It.eth_call=new St({callName:"eth_call",params:2,inputFormatter:[kt,Ft],outputFormatter:Y}),It.eth_estimateGas=new St({callName:"eth_estimateGas",params:1,inputFormatter:[kt],outputFormatter:V}),It.eth_submitWork=new St({callName:"eth_submitWork",params:3,outputFormatter:Z}),It.eth_getWork=new St({callName:"eth_getWork",params:1,outputFormatter:st}),It.eth_coinbase=new Pt({getter:"eth_coinbase",outputFormatter:at}),It.eth_mining=new Pt({getter:"eth_mining",outputFormatter:Z}),It.eth_hashrate=new Pt({getter:"eth_hashrate",outputFormatter:V}),It.eth_syncing=new Pt({getter:"eth_syncing",outputFormatter:Ct}),It.eth_gasPrice=new Pt({getter:"eth_gasPrice",outputFormatter:vt}),It.eth_accounts=new Pt({getter:"eth_accounts",outputFormatter:st}),It.eth_blockNumber=new Pt({getter:"eth_blockNumber",outputFormatter:V}),It.eth_protocolVersion=new Pt({getter:"eth_protocolVersion",outputFormatter:V}),It.web3_clientVersion=new Pt({getter:"web3_clientVersion",outputFormatter:K}),It.net_version=new Pt({getter:"net_version",outputFormatter:K}),It.shh_version=new St({callName:"shh_version",params:0,outputFormatter:V}),It.shh_post=new St({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:Z}),It.personal_newAccount=new St({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:at}),It.personal_importRawKey=new St({callName:"personal_importRawKey",params:2,outputFormatter:at}),It.personal_sign=new St({callName:"personal_sign",params:3,inputFormatter:[null,Et,null],outputFormatter:Y}),It.personal_ecRecover=new St({callName:"personal_ecRecover",params:2,outputFormatter:at}),It.personal_unlockAccount=new St({callName:"personal_unlockAccount",params:3,inputFormatter:[Et,null,z],outputFormatter:Z}),It.personal_sendTransaction=new St({callName:"personal_sendTransaction",params:2,inputFormatter:[Tt,null],outputFormatter:Y}),It.personal_lockAccount=new St({callName:"personal_lockAccount",params:1,inputFormatter:[Et],outputFormatter:Z}),It.personal_listAccounts=new Pt({getter:"personal_listAccounts",outputFormatter:st}),It.net_listening=new Pt({getter:"net_listening",outputFormatter:Z}),It.net_peerCount=new Pt({getter:"net_peerCount",outputFormatter:V}),It.eth_newFilter=new St({callName:"eth_newFilter",params:1,outputFormatter:Q}),It.eth_getLogs=new St({callName:"eth_getLogs",params:1,inputFormatter:[Q],outputFormatter:st}),It.eth_newBlockFilter=new St({callName:"eth_newBlockFilter",params:0,outputFormatter:Q}),It.eth_newPendingTransactionFilter=new St({callName:"eth_newPendingTransactionFilter",params:0,outputFormatter:Q}),It.eth_uninstallFilter=new St({callName:"eth_uninstallFilter",params:1,inputFormatter:[Q],outputFormatter:Z}),It.eth_getFilterLogs=new St({callName:"eth_getFilterLogs",params:1,inputFormatter:[Q],outputFormatter:st}),It.eth_getFilterChanges=new St({callName:"eth_getFilterChanges",params:1,inputFormatter:[Q],outputFormatter:st}),It.eth_submitHashrate=new St({callName:"eth_submitHashrate",params:2,outputFormatter:Z}),It.shh_newIdentity=new St({callName:"shh_newIdentity",params:0,outputFormatter:Y}),It.shh_hasIdentity=new St({callName:"shh_hasIdentity",params:1,outputFormatter:Z}),It.shh_newGroup=new St({callName:"shh_newGroup",params:0,outputFormatter:Y}),It.shh_addToGroup=new St({callName:"shh_addToGroup",params:1,outputFormatter:Z}),It.shh_newFilter=new St({callName:"shh_newFilter",params:1,outputFormatter:Q}),It.shh_uninstallFilter=new St({callName:"shh_uninstallFilter",params:1,outputFormatter:Z}),It.shh_getLogs=new St({callName:"shh_getLogs",params:1,outputFormatter:st}),It.shh_getFilterMessages=new St({callName:"shh_getFilterMessages",params:1,outputFormatter:st}),It.shh_getFilterChanges=new St({callName:"shh_getFilterChanges",params:1,outputFormatter:st}),It.shh_getMessages=new St({callName:"shh_getMessages",params:1,outputFormatter:st});function Mt(e,n){const r=t.eth[n];if(!r)throw new Error(`Could not find the method/property named ${n.toString()}`);Object.defineProperty(e,n,{value:function(){return r.execute.call(r,this,...arguments)}})}class Dt{constructor(t){this.provider=t,this.requests=new Map}async sendAsync(t){const e=await this.provider;if(!e)throw new Error("Provider not set or invalid");let n=mt(t.method,t.params);const r=i();return this.requests.set(n.id,r),e.sendAsync(n,((t,e)=>{this.requests.delete(n.id),t?r.reject(t):yt(e)?r.resolve(e.result):r.reject(function(t){let e=t&&t.error&&t.error.message?t.error.message:"Invalid JSON RPC response: "+JSON.stringify(t);return new Error(e)}(e))})),r}setProvider(t){this.provider=t}async getConfirmedTransaction(t){const e=await this.waitForCompletion(t);if(this.isFailure(e))throw new Error(`Transaction "${t}" failed`);return e}async waitForCompletion(e,n){if(await this.isTxDropped(e,n)){const n=await this.getTransactionAndReceipt(e);return Object.assign(Object.assign({},n),{status:t.TransactionStatus.failed})}for(;;){const n=await this.getTransactionAndReceipt(e);if(!this.isPending(n)&&n.receipt)return Object.assign(Object.assign({},n),{status:this.isFailure(n)?t.TransactionStatus.failed:t.TransactionStatus.confirmed});await Rt(2e3)}}async getTransaction(e){let n,r,o;try{const t=(await this.eth_accounts())[0];t&&(n=await this.eth_getTransactionCount(t,"latest"))}catch(t){n=null}try{if(r=await this.eth_getTransactionByHash(e),null==r)return null}catch(t){return null}if(null==r.blockNumber){if(null!=n){if(r.nonce<n){return{hash:e,type:t.TransactionType.replaced,nonce:r.nonce}}if(r.nonce>n){return{hash:e,type:t.TransactionType.queued,nonce:r.nonce}}}return Object.assign({type:t.TransactionType.pending},r)}try{if(o=await this.eth_getTransactionReceipt(e),null==o||0===o.status){return Object.assign({type:t.TransactionType.reverted},r)}}catch(t){return null}return Object.assign(Object.assign({type:t.TransactionType.confirmed},r),{receipt:o})}async isTxDropped(t,e=15){let n=e;for(;n>0;){if(null!==await this.getTransactionAndReceipt(t))return!1;n-=1,await Rt(2e3)}return!0}async getTransactionAndReceipt(t){const[e,n]=await Promise.all([this.eth_getTransactionByHash(t),this.eth_getTransactionReceipt(t)]);return e?Object.assign(Object.assign({},e),{receipt:n}):null}isPending(t){return t&&null===t.blockNumber}isFailure(t){return t&&(!t.receipt||0===t.receipt.status)}}wt([Mt,_t("design:type",Function)],Dt.prototype,"web3_clientVersion",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"web3_sha3",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"net_version",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"net_peerCount",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"net_listening",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_protocolVersion",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_syncing",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_coinbase",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_mining",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_hashrate",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_gasPrice",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_accounts",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_blockNumber",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getBalance",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getStorageAt",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getTransactionCount",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getBlockTransactionCountByHash",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getBlockTransactionCountByNumber",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getUncleCountByBlockHash",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getUncleCountByBlockNumber",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getCode",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_sign",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_sendTransaction",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_sendRawTransaction",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_call",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_estimateGas",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getBlockByHash",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getBlockByNumber",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getTransactionByHash",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getTransactionReceipt",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_newFilter",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_newBlockFilter",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_newPendingTransactionFilter",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_uninstallFilter",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getFilterChanges",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getFilterLogs",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getLogs",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_getWork",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_submitWork",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"eth_submitHashrate",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_post",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_version",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_newIdentity",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_hasIdentity",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_newGroup",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_addToGroup",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_newFilter",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_uninstallFilter",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_getFilterChanges",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"shh_getMessages",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_unlockAccount",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_newAccount",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_listAccounts",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_lockAccount",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_importRawKey",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_sendTransaction",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_sign",void 0),wt([Mt,_t("design:type",Function)],Dt.prototype,"personal_ecRecover",void 0);class Ut{constructor(t,e){this.offset=void 0,this.value=t||"",this.offset=e}isDynamic(){return void 0!==this.offset}offsetAsBytes(){return this.isDynamic()?j(nt(this.offset).toString(16),64):""}staticPart(){return this.isDynamic()?this.offsetAsBytes():this.value}dynamicPart(){return this.isDynamic()?this.value:""}encode(){return this.staticPart()+this.dynamicPart()}}function Lt(t){s.config(bt);let e=j(nt(t).toString(16),64);return new Ut(e)}function jt(t){let e=Q(t).substr(2);return e=q(e,64*Math.floor((e.length+63)/64)),new Ut(e)}function qt(t){let e=Q(t).substr(2),n=e.length/2;return e=q(e,64*Math.floor((e.length+63)/64)),new Ut(Lt(n).value+e)}function Ht(t){let e=$(t).substr(2),n=e.length/2;return e=q(e,64*Math.floor((e.length+63)/64)),new Ut(Lt(n).value+e)}function $t(t){return new Ut("000000000000000000000000000000000000000000000000000000000000000"+(t?"1":"0"))}function Wt(t){return Lt(new s(t).times(new s(2).pow(128)))}function Gt(t){let e=t.staticPart()||"0";return function(t){return"1"===new s(t.substr(0,1),16).toString(2).substr(0,1)}(e)?new s(e,16).minus(new s("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16)).minus(1):new s(e,16)}function Jt(t){let e=t.staticPart()||"0";return new s(e,16)}function zt(t){return Gt(t).dividedBy(new s(2).pow(128))}function Vt(t){return Jt(t).dividedBy(new s(2).pow(128))}function Kt(t){return"0000000000000000000000000000000000000000000000000000000000000001"===t.staticPart()}function Yt(t,e){let n=e.match(/^bytes([0-9]*)/),r=parseInt(n[1],10);return"0x"+t.staticPart().slice(0,2*r)}function Zt(t){let e=2*new s(t.dynamicPart().slice(0,64),16).toNumber();return"0x"+t.dynamicPart().substr(64,e)}function Xt(t){let e=2*new s(t.dynamicPart().slice(0,64),16).toNumber();return H(t.dynamicPart().substr(64,e))}function Qt(t){let e=t.staticPart();return"0x"+e.slice(e.length-40,e.length)}class te{constructor(t){this._inputFormatter=t.inputFormatter,this._outputFormatter=t.outputFormatter}isType(t){throw new Error("this method should be overrwritten for type "+t)}staticPartLength(t){return(this.nestedTypes(t)||["[1]"]).map((function(t){return parseInt(t.slice(1,-1),10)||1})).reduce((function(t,e){return t*e}),32)}isDynamicArray(t){let e=this.nestedTypes(t);return!!e&&!e[e.length-1].match(/[0-9]{1,}/g)}isStaticArray(t){let e=this.nestedTypes(t);return!!e&&!!e[e.length-1].match(/[0-9]{1,}/g)}staticArrayLength(t){let e=this.nestedTypes(t);if(e){const t=e[e.length-1].match(/[0-9]{1,}/g);return parseInt(t[t.length-1]||"1",10)}return 1}nestedName(t){let e=this.nestedTypes(t);return e?t.substr(0,t.length-e[e.length-1].length):t}isDynamicType(t){return!1}nestedTypes(t){return t.match(/(\[[0-9]*\])/g)}encode(t,e){if(this.isDynamicArray(e)){let n=t.length,r=this.nestedName(e),o=[];return o.push(Lt(n).encode()),t.forEach((t=>{o.push(this.encode(t,r))})),o}if(this.isStaticArray(e)){let n=this.staticArrayLength(e),r=this.nestedName(e),o=[];for(let e=0;e<n;e++)o.push(this.encode(t[e],r));return o}return this._inputFormatter(t,e).encode()}decode(t,e,n){if(this.isDynamicArray(n)){let r=parseInt("0x"+t.substr(2*e,64),16),o=parseInt("0x"+t.substr(2*r,64),16),i=r+32,s=this.nestedName(n),a=this.staticPartLength(s),u=32*Math.floor((a+31)/32),c=[];for(let e=0;e<o*u;e+=u)c.push(this.decode(t,i+e,s));return c}if(this.isStaticArray(n)){let r=this.staticArrayLength(n),o=e,i=this.nestedName(n),s=this.staticPartLength(i),a=32*Math.floor((s+31)/32),u=[];for(let e=0;e<r*a;e+=a)u.push(this.decode(t,o+e,i));return u}if(this.isDynamicType(n)){let r=parseInt("0x"+t.substr(2*e,64),16),o=parseInt("0x"+t.substr(2*r,64),16),i=Math.floor((o+31)/32),s=new Ut(t.substr(2*r,64*(1+i)),0);return this._outputFormatter(s,n)}let r=this.staticPartLength(n),o=new Ut(t.substr(2*e,2*r));return this._outputFormatter(o,n)}}function ee(t,e){return t.isDynamicType(e)||t.isDynamicArray(e)}const ne=new class{constructor(t){this._types=t}_requireType(t){let e=this._types.filter((function(e){return e.isType(t)}))[0];if(!e)throw Error("invalid solidity type!: "+t);return e}encodeParam(t,e){return this.encodeParams([t],[e])}encodeParams(t,e){let n=this.getSolidityTypes(t),r=n.map((function(n,r){return n.encode(e[r],t[r])})),o=n.reduce((function(e,r,o){let i=r.staticPartLength(t[o]),s=32*Math.floor((i+31)/32);return e+(ee(n[o],t[o])?32:s)}),0);return this.encodeMultiWithOffset(t,n,r,o)}encodeMultiWithOffset(t,e,n,r){let o=r,i="";return t.forEach(((r,s)=>{if(ee(e[s],t[s])){i+=Lt(o).encode();let r=this.encodeWithOffset(t[s],e[s],n[s],o);o+=r.length/2}else i+=this.encodeWithOffset(t[s],e[s],n[s],o)})),t.forEach(((r,s)=>{if(ee(e[s],t[s])){let r=this.encodeWithOffset(t[s],e[s],n[s],o);o+=r.length/2,i+=r}})),i}encodeWithOffset(t,e,n,r){let o=1,i=2,s=3,a=e.isDynamicArray(t)?o:e.isStaticArray(t)?i:s;if(a!==s){let s=e.nestedName(t),u=e.staticPartLength(s),c=a===o?n[0]:"";if(e.isDynamicArray(s)){let t=a===o?2:0;for(let e=0;e<n.length;e++)a===o?t+=+n[e-1][0]||0:a===i&&(t+=+(n[e-1]||[])[0]||0),c+=Lt(r+e*u+32*t).encode()}let l=a===o?n.length-1:n.length;for(let t=0;t<l;t++){let u=c/2;a===o?c+=this.encodeWithOffset(s,e,n[t+1],r+u):a===i&&(c+=this.encodeWithOffset(s,e,n[t],r+u))}return c}return n}decodeParam(t,e){return this.decodeParams([t],e)[0]}decodeParams(t,e){let n=this.getSolidityTypes(t),r=this.getOffsets(t,n);return n.map((function(n,o){return n.decode(e,r[o],t[o])}))}getOffsets(t,e){let n=e.map((function(e,n){return e.staticPartLength(t[n])}));for(let t=1;t<n.length;t++)n[t]+=n[t-1];return n.map((function(n,r){return n-e[r].staticPartLength(t[r])}))}getSolidityTypes(t){return t.map((t=>this._requireType(t)))}}([new class extends te{constructor(){super({inputFormatter:Lt,outputFormatter:Qt})}isType(t){return!!t.match(/address(\[([0-9]*)\])?/)}},new class extends te{constructor(){super({inputFormatter:$t,outputFormatter:Kt})}isType(t){return!!t.match(/^bool(\[([0-9]*)\])*$/)}},new class extends te{constructor(){super({inputFormatter:Lt,outputFormatter:Gt})}isType(t){return!!t.match(/^int([0-9]*)?(\[([0-9]*)\])*$/)}},new class extends te{constructor(){super({inputFormatter:Lt,outputFormatter:Jt})}isType(t){return!!t.match(/^uint([0-9]*)?(\[([0-9]*)\])*$/)}},new class extends te{constructor(){super({inputFormatter:qt,outputFormatter:Zt})}isType(t){return!!t.match(/^bytes(\[([0-9]*)\])*$/)}isDynamicType(){return!0}},new class extends te{constructor(){super({inputFormatter:jt,outputFormatter:Yt})}isType(t){return!!t.match(/^bytes([0-9]{1,})(\[([0-9]*)\])*$/)}},new class extends te{constructor(){super({inputFormatter:Ht,outputFormatter:Xt})}isType(t){return!!t.match(/^string(\[([0-9]*)\])*$/)}isDynamicType(){return!0}},new class extends te{constructor(){super({inputFormatter:Wt,outputFormatter:zt})}isType(t){return!!t.match(/real([0-9]*)?(\[([0-9]*)\])?/)}},new class extends te{constructor(){super({inputFormatter:Wt,outputFormatter:Vt})}isType(t){return!!t.match(/^ureal([0-9]*)?(\[([0-9]*)\])*$/)}}]);class re{constructor(t,e,n){this.requestManager=t,this.json=e,this._inputTypes=e.inputs.map((function(t){return t.type})),this._outputTypes=e.outputs.map((function(t){return t.type})),this._constant=e.constant,this._payable=e.payable,this.needsToBeTransaction="payable"in e&&e.payable||"constant"in e&&!e.constant||"stateMutability"in e&&"nonpayable"===e.stateMutability,this._name=W(e),this._address=n}extractDefaultBlock(t){if(t.length>this._inputTypes.length&&!lt(t[t.length-1]))return Ft(t.pop())}validateArgs(t){if(t.some((t=>void 0===t)))throw new Error("Invalid call, some arguments are undefined");let e=t.filter((function(t){return!(!0===lt(t)&&!1===ft(t)&&!1===ut(t))}));if(e.length!==this._inputTypes.length)throw n=e.length,r=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${n}, expected: ${r}`);var n,r}toPayload(t){let e={to:void 0,data:void 0,value:void 0,from:void 0};return t.length>this._inputTypes.length&&lt(t[t.length-1])&&(e=t[t.length-1]),this.validateArgs(t),e.to=this._address,e.data="0x"+this.signature()+ne.encodeParams(this._inputTypes,t),e}signature(){return U(this._name).slice(0,8)}unpackOutput(t){if(!t)return;const e=t.length>=2?t.slice(2):t;let n=ne.decodeParams(this._outputTypes,e);return 1===n.length?n[0]:n}async execute(t,...e){if(!t)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const n=this.toPayload(e);if(n.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!n.from)throw new Error('Missing "from" in transaction options');return await t.eth_sendTransaction(n)}{const n=this.extractDefaultBlock(e),r=this.toPayload(e),o=await t.eth_call(r,n);return this.unpackOutput(o)}}estimateGas(...t){let e=this.toPayload(t);return this.requestManager.eth_estimateGas(e)}getData(...t){return this.toPayload(t).data}displayName(){return G(this._name)}typeName(){return J(this._name)||"void"}attachToContract(t){let e=this.displayName();const n=this,r=Object.assign((function(...t){const e=this.requestManager||n.requestManager;return n.execute(e,...t)}),{estimateGas:this.estimateGas.bind(this)});t[e]||(t[e]=r),t[e][this.typeName()]=r}}function oe(t){if(null==t)return null;const e=String(t).toString();return 0===e.indexOf("0x")?e:$(e)}class ie{constructor(t){this.requestManager=t,this.isStarted=!1,this.isDisposed=!1,this.filterId=i(),this.callbacks=[],this.stopSemaphore=i()}async watch(t){if(this.isDisposed)throw new Error("The filter was disposed");t&&(this.callbacks.push(t),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const t=await this.getNewFilter();if(!t)throw new Error("Could not create a filter, response: "+JSON.stringify(t));this.filterId.resolve(t)}catch(t){throw t}this.stopSemaphore=i(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const t=await this.filterId;this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore;if(!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${t}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const t=await this.getChanges();this.callbacks.forEach((e=>{this.formatter?t.forEach((t=>{e(this.formatter(t))})):t.forEach((t=>e(t)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=i(),setTimeout((t=()=>this.poll(),function(){t().catch((t=>console.error(t)))}),500))}else this.stopSemaphore.resolve(1);var t}}class se extends ie{constructor(t,e,n=(t=>t)){super(t),this.requestManager=t,this.options=e,this.formatter=n,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(t){return oe(t)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Nt(this.options.fromBlock):"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Nt(this.options.toBlock):"latest"}}async getLogs(){this.isStarted||await this.start();const t=await this.filterId;return this.requestManager.eth_getFilterLogs(t)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const t=await this.filterId;return this.requestManager.eth_getFilterChanges(t)}async uninstall(){const t=await this.filterId;return this.requestManager.eth_uninstallFilter(t)}}class ae{constructor(t,e,n){this.requestManager=t,this.address=n,this._anonymous=!1,this._params=e.inputs,this._name=W(e),this._anonymous=e.anonymous}types(t){return this._params.filter((function(e){return e.indexed===t})).map((function(t){return t.type}))}displayName(){return G(this._name)}typeName(){return J(this._name)||"void"}signature(){return U(this._name)}encode(t={},e={}){let n={topics:[],address:this.address};["fromBlock","toBlock"].filter((function(t){return void 0!==e[t]})).forEach((function(t){n[t]=Nt(e[t])})),this._anonymous||n.topics.push("0x"+this.signature());let r=this._params.filter((function(t){return!0===t.indexed})).map((function(e){let n=t[e.name];return null==n?null:ft(n)?n.map((function(t){return"0x"+ne.encodeParam(e.type,t)})):"0x"+ne.encodeParam(e.type,n)}));return n.topics=n.topics.concat(r),n}decode(t){t.data=t.data||"",t.topics=t.topics||[];let e=(this._anonymous?t.topics:t.topics.slice(1)).map((function(t){return t.slice(2)})).join(""),n=ne.decodeParams(this.types(!0),e),r=t.data.slice(2),o=ne.decodeParams(this.types(!1),r),i=Bt(t);return i.event=this.displayName(),i.address=t.address,i.args=this._params.reduce((function(t,e){return t[e.name]=e.indexed?n.shift():o.shift(),t}),{}),delete i.data,delete i.topics,i}async execute(t,e){let n=this.encode(t,e),r=this.decode.bind(this);return new se(this.requestManager,n,r)}attachToContract(t){let e=this.execute.bind(this),n=this.displayName();t.events[n]||(t.events[n]=e),t.events[n][this.typeName()]=this.execute.bind(this,t)}}class ue{constructor(t,e,n){this._requestManager=t,this._json=e,this._address=n}encode(t={}){let e={address:this._address};return["fromBlock","toBlock"].filter((function(e){return void 0!==t[e]})).forEach((function(n){e[n]=Nt(t[n])})),e}decode(t){t.data=t.data||"";let e=ft(t.topics)&&ct(t.topics[0])?t.topics[0].slice(2):"",n=this._json.filter((function(t){return e===U(W(t))}))[0];return n?new ae(this._requestManager,n,this._address).decode(t):Bt(t)}async execute(t){let e=this.encode(t),n=this.decode.bind(this);return new se(this._requestManager,e,n)}attachToContract(t){let e=this.execute.bind(this);t.allEvents=e}}class ce{constructor(t,e,n){var r;this.requestManager=t,this.abi=e,this.address=n,this.events={},this.transactionHash=null,this.transactionHash=null,this.address=n,this.abi=e,(r=this).abi.filter((function(t){return"function"===t.type})).map((function(t){return new re(r.requestManager,t,r.address)})).forEach((function(t){t.attachToContract(r)})),function(t){let e=t.abi.filter((function(t){return"event"===t.type}));new ue(t.requestManager,e,t.address).attachToContract(t),e.map((function(e){return new ae(t.requestManager,e,t.address)})).forEach((function(e){e.attachToContract(t)}))}(this)}}function le(t,e){return t.filter((function(t){return"constructor"===t.type&&t.inputs.length===e.length})).map((function(t){return t.inputs.map((function(t){return t.type}))})).map((function(t){return ne.encodeParams(t,e)}))[0]||""}t.AbstractFilter=ie,t.Contract=ce,t.ContractFactory=class{constructor(t,e){this.requestManager=t,this.abi=e}async deploy(...t){let e,n=t[t.length-1];if(lt(n)&&!ft(n)&&(e=t.pop()),!e)throw new Error("Missing options object");if(!e.data||"string"!=typeof e.data)throw new Error("Invalid options.data");if(e.value>0){if(!(this.abi.filter((function(e){return"constructor"===e.type&&e.inputs.length===t.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor")}let r=le(this.abi,t);e.data+=r,e.gas||(e.gas=await this.requestManager.eth_estimateGas(e));const o=await this.requestManager.eth_sendTransaction(e),s=await async function(t,e){const n=i();let r=0;const o=()=>{r++,r>50?n.reject(new Error("Contract transaction couldn't be found after 50 blocks")):t.eth_getTransactionReceipt(e).then((t=>{t&&t.blockHash?n.resolve(t):setTimeout(o,1e3)}),(t=>n.reject(t)))};o();const s=await n,a=await t.eth_getCode(s.contractAddress,"latest");if(a.length>3)return s.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:a,receipt:s})}(this.requestManager,o),a=await this.at(s);return a.transactionHash=o,a}async at(t){if(!ot(t))throw new TypeError(`Invalid address ${JSON.stringify(t)}`);return new ce(this.requestManager,this.abi,t)}async getData(...t){let e={data:void 0};const n=t[t.length-1];if(lt(n)&&!ft(n)&&(e=t.pop()),!e)throw new Error("Missing options object");if(!e.data||"string"!=typeof e.data)throw new Error("Invalid options.data");const r=le(this.abi,t);return e.data+=r,e.data}},t.EthBlockFilter=class extends se{constructor(t){super(t,null,(t=>t))}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},t.EthFilter=se,t.EthPendingTransactionFilter=class extends se{constructor(t){super(t,null,(t=>t))}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},t.HTTPProvider=class{constructor(t,e={}){this.host=t,this.options=e,this.debug=!1,this.host=t||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(t,n){try{let r=null;if(r=t instanceof Array?t.map((t=>e(t))):e(t),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const o={body:JSON.stringify(r),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+o.body),fetch(this.host,o).then((async t=>{if(t.ok){const e=await t.json();this.debug&&console.log("RECV << "+JSON.stringify(e)),e.error?n(Object.assign(new Error(e.error.json||e.error),e.error)):n(null,e)}else this.debug&&console.log("ERR << "+JSON.stringify(t)),n(new Error("External error. response code: "+t.status))}),(t=>{this.debug&&console.log("ERR << "+JSON.stringify(t)),n(t)}))}catch(t){this.debug&&console.log("ERR << "+JSON.stringify(t)),n(t)}}},t.Method=St,t.Property=Pt,t.RequestManager=Dt,t.SHHFilter=class extends ie{constructor(t,e){super(t),this.requestManager=t,this.options=e,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(t){return oe(t)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const t=await this.filterId;return this.requestManager.shh_getMessages(t)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const t=await this.filterId;return this.requestManager.shh_getFilterChanges(t)}async uninstall(){const t=await this.filterId;return this.requestManager.shh_uninstallFilter(t)}},t.WebSocketProvider=class{constructor(t,e={}){this.url=t,this.options=e,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const t=this.connection;this.timeout(new Error("Provider disposed.")),t.then((t=>t.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(t,n){const r=[];let o;if(t instanceof Array)o=Promise.all(t.map((t=>{const n=i();try{const o=e(t);r.push(o),this.responseCallbacks.set(o.id,n)}catch(t){n.reject(t)}return n})));else{const n=i();try{const o=e(t);r.push(o),this.responseCallbacks.set(o.id,n)}catch(t){n.reject(t)}o=n}o.then((t=>n(null,t)),(t=>n(t))),this.connection.then((t=>{r.forEach((e=>{const n=JSON.stringify(e);this.debug&&console.log("SEND >> "+n),t.send(n)}))}),(t=>{n(t)}))}parseResponse(t){let e=[];return t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((t=>{let n=t;this.lastChunk&&(n=this.lastChunk+n);let r=null;try{r=JSON.parse(n)}catch(t){return this.lastChunk=n,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk=null,r&&e.push(r)})),e}processMessage(t){if("id"in t){const e=t.id,n=this.responseCallbacks.get(e);if(!n)return void console.error("Error: Received a response for an unknown request",t);this.responseCallbacks.delete(e),"error"in t?n.reject(Object.assign(new Error(t.error.message||t.error),t.error)):"result"in t&&n.resolve(t)}else this.notificationCallbacks.forEach((e=>e(null,t)))}timeout(t){this.connection&&this.connection.isPending||(this.connection=i());const e=t||new Error("Connection timeout");this.responseCallbacks.forEach((t=>t.reject(e))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((t=>t.close())),this.connection&&this.connection.isPending||(this.connection=i()),this.lastChunk="";let t=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!t)throw new Error("Please provide a WebSocketConstructor");const e=new t(this.url,this.options.protocol);e.onopen=()=>{this.connection.resolve(e)},e.onerror=t=>{this.timeout(t)},e.onclose=t=>{this.timeout(new Error(`Connection closed (${t&&t.reason||"Unknown reason"})`))},e.onmessage=t=>{let e="string"==typeof t.data?t.data:"";this.debug&&console.log("RECV << "+t.data),this.parseResponse(e).forEach((t=>{t instanceof Array?t.forEach((t=>this.processMessage(t))):this.processMessage(t)}))}}},t.__moduleExports=s,t.default=Dt,t.extractDisplayName=G,t.extractTypeName=J,t.fromAscii=function(t,e=0){let n="";for(let e=0;e<t.length;e++){let r=t.charCodeAt(e).toString(16);n+=r.length<2?"0"+r:r}return"0x"+n.padEnd(e,"0")},t.fromDecimal=X,t.fromUtf8=$,t.fromWei=function(t,e){let n=et(t).dividedBy(tt(e));return ut(t)?n:n.toString(10)},t.getValueOfUnit=tt,t.hexToBytes=D,t.isAddress=ot,t.isArray=ft,t.isBigNumber=ut,t.isBloom=function(t){return!!/^(0x)?[0-9a-f]{512}$/i.test(t)&&!!/^(0x)?[0-9a-f]{512}$/i.test(t)},t.isBoolean=ht,t.isChecksumAddress=it,t.isFunction=function(t){return"function"==typeof t},t.isHex=function(t){return"string"==typeof t&&/^0x[0-9a-fA-F]+$/.test(t)},t.isJson=function(t){try{return!!JSON.parse(t)}catch(t){return!1}},t.isObject=lt,t.isStrictAddress=rt,t.isString=ct,t.isTopic=function(t){return!!/^(0x)?[0-9a-f]{64}$/i.test(t)&&!!/^(0x)?[0-9a-f]{64}$/i.test(t)},t.isValidResponse=yt,t.padLeft=j,t.padRight=q,t.sha3=U,t.toAddress=at,t.toArray=st,t.toAscii=function(t){let e="",n=0,r=t.length;for("0x"===t.substring(0,2)&&(n=2);n<r;n+=2){let r=parseInt(t.substr(n,2),16);e+=String.fromCharCode(r)}return e},t.toBatchPayload=function(t){return t.map((function(t){return mt(t.method,t.params)}))},t.toBigNumber=et,t.toBoolean=Z,t.toChecksumAddress=function(t){if(void 0===t)return"";const e=t.toLowerCase().replace("0x",""),n=U(e);let r="0x";for(let t=0;t<e.length;t++)parseInt(n[t],16)>7?r+=e[t].toUpperCase():r+=e[t];return r},t.toData=Y,t.toDecimal=V,t.toHex=Q,t.toNullDecimal=z,t.toPayload=mt,t.toString=K,t.toTwosComplement=nt,t.toUtf8=H,t.toWei=function(t,e){let n=et(t).times(tt(e));return ut(t)?n:n.toString(10)},t.transformToFullName=W,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=eth-connect.js.map
